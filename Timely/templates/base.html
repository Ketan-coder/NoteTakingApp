{% load static %}
<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="title" content="Timely: One Notebook For Every Need">
    <meta name="description"
        content="Timely can be used to create quick Notebooks with pages and many more things.">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://timely.pythonanywhere.com/">
    <meta property="og:title" content="Timely: One Notebook For Every Need">
    <meta property="og:description"
        content="Timely can be used to create quick Notebooks with pages and many more things.">
    <meta property="og:image" content="resoures/img/For_website.png">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://timely.pythonanywhere.com/">
    <meta property="twitter:title" content="Timely: One Notebook For Every Need">
    <meta property="twitter:description"
        content="Timely can be used to create quick Notebooks with pages and many more things.">
    <meta property="twitter:image" content="resoures/img/For_website.png">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="apple-touch-icon" sizes="57x57" href="{% static 'favicon/apple-icon-57x57.png' %}">
    <link rel="apple-touch-icon" sizes="60x60" href="{% static 'favicon/apple-icon-60x60.png' %}">
    <link rel="apple-touch-icon" sizes="72x72" href="{% static 'favicon/apple-icon-72x72.png' %}">
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'favicon/apple-icon-76x76.png' %}">
    <link rel="apple-touch-icon" sizes="114x114" href="{% static 'favicon/apple-icon-114x114.png' %}">
    <link rel="apple-touch-icon" sizes="120x120" href="{% static 'favicon/apple-icon-120x120.png' %}">
    <link rel="apple-touch-icon" sizes="144x144" href="{% static 'favicon/apple-icon-144x144.png' %}">
    <link rel="apple-touch-icon" sizes="152x152" href="{% static 'favicon/apple-icon-152x152.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon/apple-icon-180x180.png' %}">
    <link rel="icon" type="image/png" sizes="192x192" href="{% static 'favicon/android-icon-192x192.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'favicon/favicon-96x96.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicon/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'favicon/manifest.json' %}">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="{% static 'favicon/ms-icon-144x144.png' %}">
    <meta name="theme-color" content="#ffffff">
    <style>
      /* Add this CSS to your stylesheet or FAB-specific CSS file */
.fab-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000; /* Ensure FAB is above other elements */
}

.fab-btn {
    display: inline-block;
    width: 200px;
    height: 60px;
    border-radius: 10px;
    background-color: #3385ff; /* Change color as desired */
    color: #fff;
    font-size: 16px;
    font-weight: 500;
    text-align: center;
    line-height: 60px;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    text-decoration: none;
    transition: background-color 0.3s ease;
}

.fab-btn:hover {
    background-color: #0056b3; /* Change hover color as desired */
}
.mobile_col {
  display: flex !important;
}

@media (min-height: 680px) and (orientation: portrait) {
  .mobile_col {
    display: block !important;
  }
}
img{
    width: 550px !important;
    height: auto;
}
    </style>
    <title>
		{% block title %}
		
		{% endblock title %}
	</title>
 
    <!-- Halfmoon CSS -->
	{% comment %} <script src="https://kit.fontawesome.com/2058ad717c.js" crossorigin="anonymous"></script> {% endcomment %}
    <link href="https://cdn.jsdelivr.net/npm/halfmoon@2.0.1/css/halfmoon.min.css" rel="stylesheet" integrity="sha256-SsJizWSIG9JT9Qxbiy8xnYJfjCAkhEQ0hihxRn7jt2M=" crossorigin="anonymous">
    <link href="{% static 'vendors/css/halfmoon.css' %}" rel="stylesheet" >
    <script src="{% static 'vendors/js/htmx.min.js' %}" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    {% comment %} <link href="https://fonts.googleapis.com/css?family=Roboto|Lora|Poppins" rel="stylesheet"> {% endcomment %}
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@100;300;400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;700;900&display=swap" rel="stylesheet">
	{% block head %}
	
	{% endblock head %}
  </head>
  <body>
	<!-- Navbar nav scrolling -->
<nav class="navbar navbar-expand-lg" style="background-color: var(--bs-content-bg); border-bottom: var(--bs-border-width) solid var(--bs-content-border-color);">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'home' %}" style="font-weight: 800;">
      {% comment %} <img src="..." alt="Logo" width="24" height="24" class="d-inline-block align-text-top"> {% endcomment %}
      Timely
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-collapse-7" aria-controls="navbar-collapse-7" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-collapse-7">
      <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="{% url 'home' %}">Home</a>
        </li>
        <li class="nav-item">
          <button type="button" class="nav-link" data-bs-toggle="offcanvas" data-bs-target="#example-offcanvas-4">
            Todo's
          </button>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'loadJsonToModels' %}">Load Notebook</a>
        </li>
        <li class="nav-item">
          {% if user.is_authenticated %}
            <a class="nav-link" href="{% url 'update_user' %}">Update Profile</a>
          {% else %}
          {% endif %}
        </li>
        <li class="nav-item">
          {% if user.is_authenticated %}
            <a class="nav-link" href="{% url 'logout' %}">Logout</a>
            {% else %}
            <a class="nav-link" href="{% url 'login' %}">Login</a>
          {% endif %}
        </li>
      </ul>
      <form class="d-flex" role="search" method="GET" action="{% url 'search' %}">
        {% csrf_token %}
          <input class="form-control me-2" type="search" name="query" placeholder="Search Notes" aria-label="Search">
          <button class="btn btn-primary" type="submit">Search</button>
      </form>

    </div>
  </div>
</nav>
  <!-- Navbar end -->
  <!-- Flash messages -->
{% if messages %}
    <div class="toast-container position-fixed top-0 end-0 p-3">
        {% for message in messages %}
            <div id="toast-{{ forloop.counter }}" 
                 class="toast text-bg-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} border-0 shadow-none show"
                 role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                    <div class="toast-body">
                        <strong class="me-2 text-capitalize">{{ message.tags }}:</strong> {{ message }}
                    </div>
                    <div class="me-2 m-auto">
                        <button type="button" class="btn-close close-toast" data-toast-id="toast-{{ forloop.counter }}" aria-label="Close" data-bs-theme="dark"></button>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var toasts = document.querySelectorAll(".toast");

            toasts.forEach(function (toastElement) {
                // Auto-hide after 8 seconds (8000ms)
                setTimeout(function () {
                    toastElement.classList.remove("show");  // Hide the toast
                    toastElement.classList.add("fade");  // Smooth fade effect
                }, 8000);
            });

            // Manually close on button click
            document.querySelectorAll(".close-toast").forEach(function (button) {
                button.addEventListener("click", function () {
                    var toastId = this.getAttribute("data-toast-id");
                    var toastElement = document.getElementById(toastId);
                    if (toastElement) {
                        toastElement.classList.remove("show");
                        toastElement.classList.add("fade");
                    }
                });
            });
        });
    </script>
{% endif %}


<div class="offcanvas offcanvas-top" data-bs-backdrop="static" tabindex="-1" id="example-offcanvas-4">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Tasks</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <div class="card mw-100">
      <div class="card-header">
        <div class="hstack gap-2">
          <!-- Add Todo Form -->
          <input class="form-control me-auto" type="text" name="todo_title" id="todo_title" placeholder="To-do item">
          <button 
              type="button" 
              class="btn btn-secondary" 
              id="add-btn"
              hx-post="{% url 'add_todo' %}" 
              hx-target="#todo-list"
              hx-swap="beforeend"
              hx-include="[name='todo_title']"
              hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
          >
            Add
          </button>
          <button type="button" class="btn btn-danger" id="reset-btn">Reset</button>
        </div>
      </div>

      <!-- Todo List -->
      <div class="card-body">
        <div class="vstack gap-1 border-top mt-3" id="todo-list">
          {% for todo in todos %}
            {% include 'partials/todo_item.html' %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>


        
    {% block body %}
	
	{% endblock body %}

    

    <!-- Option 1: Bootstrap JS bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script>
      const popoverTriggerList = document.querySelectorAll(
      "[data-bs-toggle='popover']"
      );
      const popoverList = [...popoverTriggerList].map(
      popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl)
      );
      document.getElementById("reset-btn").addEventListener("click", function () {
          document.getElementById("todo_title").value = ""; // Clears the input field
      });
      document.getElementById("todo_title").addEventListener("keypress", function (event) {
          if (event.key === "Enter") {
              event.preventDefault(); // Prevent form submission
              document.getElementById("add-btn").click(); // Click the Add button
              document.getElementById("todo_title").value = "";
          }
      });
    </script>
    <script>
      if (window.location.pathname.match(/^\/sharedNotebooks\/\d+\/$/)) {
          window.location.href = "/sharedNotebooks/";  // Redirect to the main URL
      }
    </script>    
	{% block script %}{% endblock script %}
    <!-- Option 2: Separate Popper and Bootstrap JS
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    -->
  </body>
</html>
